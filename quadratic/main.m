cons1 = [1,1,2;1,1,-2;-1,1,2;-1,1,-2];
center1 = [0,0];
cons2 = [1,1,0;1,-1,0;1,1,4;1,-1,-4];
center2 = [2,0];

[m1,b1] = splitConstrain(cons1,center1);
[m2,b2] = splitConstrain(cons2,center2);

t1 = 15;
t2 = 15;
A1 = [];
A2 = [];
B1 = [];
B2 = [];
% build constraints
for i = 0 : 0.1 : floor(t1)
    A1 = [A1; constrain2A(m1,5,i,1,2)];
    B1 = [B1; b1];
end
for i = 0 : 0.1 : floor(t2)
    A2 = [A2; constrain2A(m2,5,i,2,2)];
    B2 = [B2; b2];
end

Afinal = [A1 ; A2];
Bfinal = [B1 ; B2];  

H = hardCodeH(t1, t2);
f = zeros(1,20);

aeq = hardCodeAeq(t1);
beq = zeros(14,1);
beq(1) = -1;
beq(2) = 1;
beq(3) = 3;
beq(4) = 1;
% beq(1) = -1;
% beq(2) = 1;
% beq(3) = 1;
% beq(4) = 0;
% beq(5) = 1;
% beq(6) = 0;
% beq(7) = 3;
% beq(8) = 1;

path = {[-1,1],[1,0],[3,1]};
time = [15,15];
beq2 = genBeq(path);
f = zeros(1, length(time) * 10);
H2 = genHessenberg(time);
aeq2 = genAeq(time);

z = quadprog(H,f,Afinal,Bfinal,aeq,beq);

disp(z);

% t = 0:0.1:15;
% x = z(1) * t.^4 + z(2) * t.^3 + z(3) * t.^2 + z(4) * t.^1 + z(5);
% y = z(6) * t.^4 + z(7) * t.^3 + z(8) * t.^2 + z(9) * t.^1 + z(10);
% plot(x,y);
% 
% hold on;
% t = 0:0.1:15;
% x = z(11) * t.^4 + z(12) * t.^3 + z(13) * t.^2 + z(14) * t.^1 + z(15);
% y = z(16) * t.^4 + z(17) * t.^3 + z(18) * t.^2 + z(19) * t.^1 + z(20);
% plot(x,y);

% x to t, y to t velocity
% t = 0:0.1:15;
% x = z(1) * 4 * t.^3 + z(2) * 3 * t.^2 + z(3) * 2 * t + z(4);
% y = z(6) * 4 * t.^3 + z(7) * 3 * t.^2 + z(8) * 2 * t + z(9);
% plot(t,x);
% hold on;
% plot(t,y);

% x to t, y to t acceleration
% t = 0:0.1:15;
% x = z(1) * 12 * t.^2 + z(2) * 6 * t.^2 + z(3) * 2;
% y = z(6) * 12 * t.^2 + z(7) * 6 * t.^2 + z(8) * 2;
% plot(t,x);
% hold on;
% plot(t,y);

t = 0:0.1:15;
x = z(1) * 24 * t.^1 + z(2) * 6;
y = z(6) * 24 * t.^1 + z(7) * 6;
plot(t,x);
hold on;
plot(t,y);

% t = 0:0.1:15;
% x = z(11) * 4 * t^3 + z(12) * 3 * t^2 + z(13) * 2 * t + z(14);
% y = z(16) * 4 * t^3 + z(17) * 3 * t^2 + z(18) * 2 * t + z(19);
% plot(x,y)

% path = {[-1,1],[1,0],[3,1]};
% disp(genBeq(path));
%%%%% old codes for 5 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% cons1 = [1,1,2;1,1,-2;-1,1,2;-1,1,-2];
% center1 = [0,0];
% cons2 = [1,1,0;1,-1,0;1,1,4;1,-1,-4];
% center2 = [2,0];
% 
% % cons1 = [1.73417721518987,-1,857.142723179351;1.73417721518987,-1,340.376264162421;-0.576642335766423,-1,743.238867655703;-0.576642335766423,-1,858.673541103422;-0.0108138833864438,-1,796.378485918526;0.0113596587061040,-1,795.613771603993;3.10011162142911,-1,776.399330271425;-1.10357230956310,-1,908.053707982281;-35.8071976650268,-1,970.035988325134;0.000434969582934502,-1,695.934319592977;-0.0176960258749474,-1,698.654403881242];
% % cons2 = [1,0,-106;1,0,-476;0,1,-661;0,1,-761;-0.0585424937756544,-1,709.640401049728;0,1,-737;0.119680467570919,-1,635.306026320090];
% % center1 = [(90+11)/2 (156 + 19)/2];
% % center2 = [(90+90)/2 (156 + 426)/2];
% 
% [m1,b1] = splitConstrain(cons1,center1);
% [m2,b2] = splitConstrain(cons2,center2);
% 
% t1 = 15;
% t2 = 15;
% A1 = [];
% A2 = [];
% B1 = [];
% B2 = [];
% % step is 1
% for i = 0 : 1 : floor(t1)
%     A1 = [A1; constrain2A(m1,6,i,1,2)];
%     B1 = [B1; b1];
% end
% for i = 0 : 1 : floor(t2)
%     A2 = [A2; constrain2A(m2,6,i,2,2)];
%     B2 = [B2; b2];
% end
% 
% Afinal = [A1 ; A2];
% Bfinal = [B1 ; B2];  
% 
% H = testH(t1, t2);
% f = zeros(1,24);
% 
% aeq = testAeq(t1);
% beq = zeros(18,1);
% beq(1) = -1;
% beq(2) = 1;
% beq(3) = 1;
% beq(4) = 0;
% beq(5) = 3;
% beq(4) = 1;
% 
% quadprog(H,f,Afinal,Bfinal,aeq,beq);
% 
% % genH([t1,t2]);
% % quadprog(H,f,Afinal,Bfinal);
% 
% % myfun = @(x) 25/3 * x(1)^2 * t1^3  + 10 * x(1)*x(2) * t1 + x(2)^2 * t1 + ...
% %     25/3 * x(7)^2 * t1^3  + 10 * x(7)*x(8) * t1 + x(8)^2 * t1 + ...
% %     25/3 * x(13)^2 * t2^3  + 10 * x(13)*x(14) * t2 + x(14)^2 * t2 + ...
% %     25/3 * x(19)^2 * t2^3  + 10 * x(19)*x(20) * t2 + x(20)^2 * t2;
% % % [-10,-10,-10,-10,-10,-10,-10,-10,-10,-10,-10,-10,-10,-10,-10,-10,-10,-10,-10,-10,-10,-10,-10,-10]
% % z = fmincon(myfun,zeros(1,24),Afinal,Bfinal, aeq, beq);
% 
% % disp(x);
% % 
% % 
% % t = -2:0.1:15;
% % x = z(1) * t.^5 + z(2) * t.^4 + z(3) * t.^3 + z(4) * t.^2 + z(1) * t.^1 + z(6);
% % y = z(7) * t.^5 + z(8) * t.^4 + z(9) * t.^3 + z(10) * t.^2 + z(11) * t.^1 + z(12);
% % plot(x,y);
% % 
% % hold on;
% % t = 0:0.1:20;
% % x = z(13) * t.^5 + z(14) * t.^4 + z(15) * t.^3 + z(16) * t.^2 + z(17) * t.^1 + z(18);
% % y = z(19) * t.^5 + z(20) * t.^4 + z(21) * t.^3 + z(22) * t.^2 + z(23) * t.^1 + z(24);
% % plot(x,y);
